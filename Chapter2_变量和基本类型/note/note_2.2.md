## 2.2 变量

> 本章术语：
> * 列表初始化（list initialization）：指使用花括号来进行初始化。
> * 声明（declaration）：使得名字为程序所知。
> * 定义（definition）：负责创建与名字关联的实体。
> * 作用域（scope）： C++ 语言中大多数作用域都以花括号分隔。
> * 全局作用域（global scope）：定义于所有花括号之外的名字，在整个程序的范围内都可以使用。
> * 块作用域（block scope）：在花括号之内定义的名字。
> * 内层作用域（inner scope）：被包含的作用域。
> * 外层作用域（outer scope）：包含着别的作用域的作用域。

### 2.2.1 变量定义
在同一条定义语句中，可以用先定义的变量值去初始化后定义的其他变量。

4 种初始化方式：
```c
int units_sold = 0;
int units_sold = {0};  // 列表初始化
int units_sold{0};     // 列表初始化
int units_sold(0);
```

当使用列表初始化且初始值存在丢失信息的风险时，编译器将报错：
```c
long double ld = 3.1415926536;
int a{ld}, b = {ld};  // 此处编译器会报错
int c(ld), d = ld;    // 编译器不会报错，但小数部分信息丢失
```

定义于任何函数体之外的变量默认初始化为 0 。定义在函数体内部的内置类型变量将不被初始化。

*建议初始化每一个内置类型的变量*

### 2.2.2 变量声明和定义的关系
如果想声明一个变量而非定义它，就在变量名前添加关键字 `extern` ，而且不要显式地初始化变量： `extern int i;`

任何包含了显式初始化的声明即成为定义： `extern double pi = 3.1416;`

在函数体内部，如果试图初始化一个由 `extern` 关键字标记的变量，将引发错误。

变量能且只能被定义一次，但是可以被多次声明。

### 2.2.3 标识符
必须以**字母**或**下划线**开头，由字母、下划线、数字组成。对大小写敏感。

自定义的标识符不能连续出现两个下划线，不能以下划线紧连大写字母开头。  
定义在函数体外的标识符不能以下划线开头。

变量命名规范：
* 变量名一般用小写字母
* 自定义类名一般以大写字母开头
* 单词间以下划线或大写字母分隔

### 2.2.4 名字的作用域
名字的有效区域始于名字的声明语句，以声明语句所在的作用域末端为结束。

*建议当第一次使用变量时再定义它*

作用域中一旦声明了某个名字，它所嵌套着的所有作用域中都能访问该名字。同时，允许在内层作用域中**重新定义**外层作用域已有的名字。

*函数内部**不宜**定义与全局变量同名的新变量*  
*如果函数有可能用到某全局变量，则不宜再定义一个同名的局部变量*

全局作用域本身没有名字，因此当作用域操作符（`::`）的左侧为空时，向全局作用域发出请求获取作用域操作符右侧名字对应的变量。



### 练习
* [练习 2.9](../src/quiz_2.9.md)
* [练习 2.10](../src/quiz_2.10.cpp)
* [练习 2.11](../src/quiz_2.11.md)
* [练习 2.12](../src/quiz_2.12.md)
* [练习 2.13](../src/quiz_2.13.cpp)
* [练习 2.14](../src/quiz_2.14.cpp)
