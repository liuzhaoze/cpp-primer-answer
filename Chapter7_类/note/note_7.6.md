# 7.6 类的静态成员

类的静态成员与类本身相关，而不是与该类的每个实例分别相关。

例如：属于银行账户类的每个实例都有一个数据成员表示当前基准利率，一旦利率改变，每个实例的利率成员都会改变。

声明静态成员：在成员的声明之前加上关键字 `static` 。

类的静态成员存在于任何对象之外，对象中不包含任何与静态数据成员有关的数据。  
静态成员函数也不与任何对象绑定在一起，它们不包含 `this` 指针。

使用作用域运算符（`::`）直接访问静态成员。  
也可以使用 `.` 或 `->` 通过某个对象、对象的引用或者对象的指针来访问静态成员。

成员函数不用通过作用域运算符就能直接使用静态成员。（和一般成员一样对待）

当在类的外部定义静态成员时，不需要重复 `static` 关键字。

*和类的所有成员一样，当我们指向类外部的静态成员时，必须指明成员所属的类名。*

*static 关键字只出现在类内部的声明语句中。*

静态数据成员**不属于**类的任何一个对象，所以他们并**不是**在创建类的对象时被定义的，因此他们**不是**由类的构造函数初始化的。**不能**在类的内部初始化静态成员。

类似于全局变量，静态数据成员定义在**任何函数之外**，必须在**类的外部**定义和初始化每个静态成员。一旦被定义，静态数据成员就将一直存在于程序的整个生命周期中。

*一个静态数据成员只能定义一次。*  
*想要确保对象只能定义一次，最好的办法是把静态数据成员的定义与其他非内联函数的定义放在同一个文件中。*

常量静态数据成员允许在类内进行初始化。要求静态成员必须是字面值常量类型的 constexpr 。

```c
class Account
{
private:
    static constexpr int period = 30; // 常量静态数据成员的类内初始化
    double daily_tbl[period];
};

// 不带初始值的常量静态成员的定义
constexpr int Account::period; // 初始值在类内提供
```

*即使一个常量静态数据成员在类内部被初始化了，通常情况下也应该在类的外部定义一下该成员。*

静态成员独立于任何对象，因此静态成员比普通成员适用于更多的场景：

* 静态数据成员可以是不完全类型（7.3.3节）
* 静态数据成员可以是他所属的类型、该类型的指针或引用；而普通数据成员只能是他所属的类型的指针或引用，不能是他所属的类型
* 静态数据成员可以作为类中函数的默认实参，而普通数据成员不能

## 练习

* [练习 7.56](../src/quiz_7.56.md)
* [练习 7.57](../src/quiz_7.57.hpp)
* [练习 7.58](../src/quiz_7.58.cpp)
